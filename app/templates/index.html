<body>

<div class="container">
<button id="add_bar" onClick="add_bar()" >Add bar</button>
</div>

<script src="/static/nanobar.min.js"></script>
<script>

	var percent = 0;
	var nanobars = [];
	
	function add_bar() {

		if (nanobars.length === 0) {
			// Create div to put bar inside
			var div = document.createElement("div");
			div.setAttribute("id", "bar-" + nanobars.length);
			document.body.appendChild(div);

			// Percent text, in its own paragraph
			var p = document.createElement("p");
			p.setAttribute("id", "p-" + nanobars.length);
			p.setAttribute("style", "margin: 0;");
			document.getElementById("bar-" + nanobars.length).appendChild(p);
			var ptext = document.createTextNode("Bar created");
			p.appendChild(ptext);

			// Create new bar, push to array
			var bar = new Nanobar({target: document.getElementById("bar-" + nanobars.length)});
			nanobars.push(bar);
			bar.go(10);
		}
		
		var i;
		for (i = 0; i < nanobars.length; i++) {
			percent = percent + 20;
				nanobars[i].go(percent);
			if (percent >= 100) {
				document.getElementById("p-" + i).innerHTML = "Done!";
				percent = 0;
			} else {
				document.getElementById("p-" + i).innerHTML = percent + "%";
			}

		}
		
	}
</script>
	
</body>
</html>
